<UserControl x:Class="IEMS.WPF.Controls.LoadingOverlay"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Name="LoadingOverlayControl">
    <Grid Background="#80000000" Visibility="{Binding IsLoading, ElementName=LoadingOverlayControl, Converter={StaticResource BooleanToVisibilityConverter}}">
        <Border Background="{StaticResource CardBrush}" CornerRadius="10" Padding="30"
                HorizontalAlignment="Center" VerticalAlignment="Center">
            <Border.Effect>
                <DropShadowEffect Color="Black" Direction="315" ShadowDepth="5" Opacity="0.3" BlurRadius="10"/>
            </Border.Effect>
            <StackPanel Orientation="Horizontal">
                <Border Width="24" Height="24" Margin="0,0,15,0">
                    <Border.RenderTransform>
                        <RotateTransform x:Name="SpinnerTransform"/>
                    </Border.RenderTransform>
                    <Border.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetName="SpinnerTransform"
                                                   Storyboard.TargetProperty="Angle"
                                                   From="0" To="360" Duration="0:0:1.5"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Border.Triggers>
                    <Ellipse Stroke="{StaticResource PrimaryBrush}" StrokeThickness="3"
                             StrokeDashArray="15 5" Fill="Transparent"/>
                </Border>
                <TextBlock Text="{Binding LoadingMessage, ElementName=LoadingOverlayControl}"
                           FontSize="16" FontWeight="Medium"
                           Foreground="{StaticResource TextPrimaryBrush}"
                           VerticalAlignment="Center"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>