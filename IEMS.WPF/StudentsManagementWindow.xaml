<Window x:Class="IEMS.WPF.StudentsManagementWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Students Management" Height="700" Width="1600"
        WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Background="{StaticResource PrimaryBrush}" Orientation="Horizontal" Height="60">
            <TextBlock Text="ðŸ‘¥" FontSize="30" Margin="20,0" VerticalAlignment="Center"/>
            <TextBlock Text="Students Management System"
                       FontSize="20" FontWeight="Bold" Foreground="{StaticResource TextOnPrimaryBrush}"
                       VerticalAlignment="Center" Margin="10,0,0,0"/>
        </StackPanel>

        <!-- Main Content -->
        <TabControl Grid.Row="1" Margin="10">
            <TabItem Header="ðŸ“š Students" FontSize="14">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,10,0,10">
                        <Button x:Name="btnAddStudent" Content="Add Student" Width="100" Height="35" Margin="0,0,10,0"
                                Click="BtnAddStudent_Click" Style="{StaticResource SuccessButtonStyle}"/>
                        <Button x:Name="btnEditStudent" Content="Edit Student" Width="100" Height="35" Margin="0,0,10,0"
                                Click="BtnEditStudent_Click" Style="{StaticResource PrimaryButtonStyle}"/>
                        <Button x:Name="btnDeleteStudent" Content="Delete Student" Width="100" Height="35" Margin="0,0,10,0"
                                Click="BtnDeleteStudent_Click" Style="{StaticResource DangerButtonStyle}"/>
                        <Button x:Name="btnRefreshStudents" Content="Refresh" Width="100" Height="35" Margin="0,0,10,0"
                                Click="BtnRefreshStudents_Click" Style="{StaticResource SecondaryButtonStyle}"/>
                        <Separator Width="20"/>
                        <TextBlock Text="Search:" VerticalAlignment="Center" Margin="10,0,5,0" Foreground="{StaticResource TextPrimaryBrush}"/>
                        <TextBox x:Name="txtSearchStudents" Width="200" Height="25" VerticalAlignment="Center"
                                 TextChanged="TxtSearchStudents_TextChanged"
                                 ToolTip="Search by name, student number, father's name, or mobile number"/>
                    </StackPanel>

                    <DataGrid x:Name="dgStudents" Grid.Row="1" AutoGenerateColumns="False"
                              CanUserAddRows="False" CanUserDeleteRows="False" IsReadOnly="True"
                              GridLinesVisibility="All" HeadersVisibility="Column" AlternatingRowBackground="{StaticResource SurfaceBrush}">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Serial No" Binding="{Binding SerialNo}" Width="70"/>
                            <DataGridTextColumn Header="Standard" Binding="{Binding Standard}" Width="70"/>
                            <DataGridTextColumn Header="Division" Binding="{Binding ClassDivision}" Width="70"/>
                            <DataGridTextColumn Header="First Name" Binding="{Binding FirstName}" Width="100"/>
                            <DataGridTextColumn Header="Father's Name" Binding="{Binding FatherName}" Width="120"/>
                            <DataGridTextColumn Header="Surname" Binding="{Binding Surname}" Width="100"/>
                            <DataGridTextColumn Header="Date of Birth" Binding="{Binding FormattedDateOfBirth}" Width="90"/>
                            <DataGridTextColumn Header="Gender" Binding="{Binding Gender}" Width="70"/>
                            <DataGridTextColumn Header="Mother's Name" Binding="{Binding MotherName}" Width="120"/>
                            <DataGridTextColumn Header="Student No" Binding="{Binding StudentNumber}" Width="90"/>
                            <DataGridTextColumn Header="Admission Date" Binding="{Binding FormattedAdmissionDate}" Width="90"/>
                            <DataGridTextColumn Header="Caste Category" Binding="{Binding CasteCategory}" Width="90"/>
                            <DataGridTextColumn Header="Religion" Binding="{Binding Religion}" Width="80"/>
                            <DataGridTextColumn Header="BPL" Binding="{Binding IsBPL}" Width="50"/>
                            <DataGridTextColumn Header="Semi-English" Binding="{Binding IsSemiEnglish}" Width="90"/>
                            <DataGridTextColumn Header="Address" Binding="{Binding Address}" Width="150"/>
                            <DataGridTextColumn Header="Mobile" Binding="{Binding ParentMobileNumber}" Width="100"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <TabItem Header="ðŸ« Classes" FontSize="14">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,10,0,10">
                        <Button x:Name="btnAddClass" Content="Add Class" Width="100" Height="35" Margin="0,0,10,0"
                                Click="BtnAddClass_Click" Style="{StaticResource SuccessButtonStyle}"/>
                        <Button x:Name="btnEditClass" Content="Edit Class" Width="100" Height="35" Margin="0,0,10,0"
                                Click="BtnEditClass_Click" Style="{StaticResource PrimaryButtonStyle}"/>
                        <Button x:Name="btnDeleteClass" Content="Delete Class" Width="100" Height="35" Margin="0,0,10,0"
                                Click="BtnDeleteClass_Click" Style="{StaticResource DangerButtonStyle}"/>
                        <Button x:Name="btnRefreshClasses" Content="Refresh" Width="100" Height="35" Margin="0,0,10,0"
                                Click="BtnRefreshClasses_Click" Style="{StaticResource SecondaryButtonStyle}"/>
                        <Button x:Name="btnViewClassStudents" Content="View Students" Width="120" Height="35" Margin="10,0,10,0"
                                Click="BtnViewClassStudents_Click" Style="{StaticResource PrimaryButtonStyle}"/>
                    </StackPanel>

                    <DataGrid x:Name="dgClasses" Grid.Row="1" AutoGenerateColumns="False"
                              CanUserAddRows="False" CanUserDeleteRows="False" IsReadOnly="True"
                              GridLinesVisibility="All" HeadersVisibility="Column" AlternatingRowBackground="{StaticResource SurfaceBrush}">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Class" Binding="{Binding DisplayName}" Width="150"/>
                            <DataGridTextColumn Header="Class Teacher" Binding="{Binding TeacherName}" Width="200"/>
                            <DataGridTextColumn Header="Students Enrolled" Binding="{Binding StudentCount}" Width="120"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <TabItem Header="ðŸ’° Fee Payments" FontSize="14">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,10,0,10">
                        <Button x:Name="btnAddFeePayment" Content="Record Payment" Width="120" Height="35" Margin="0,0,10,0"
                                Click="BtnAddFeePayment_Click" Style="{StaticResource SuccessButtonStyle}"/>
                        <Button x:Name="btnViewReceipt" Content="View Receipt" Width="100" Height="35" Margin="0,0,10,0"
                                Click="BtnViewReceipt_Click" Style="{StaticResource PrimaryButtonStyle}"/>
                        <Button x:Name="btnPrintReceipt" Content="Print Receipt" Width="100" Height="35" Margin="0,0,10,0"
                                Click="BtnPrintReceipt_Click" Background="#9B59B6" Foreground="White" BorderThickness="0"/>
                        <Button x:Name="btnRefreshFeePayments" Content="Refresh" Width="100" Height="35" Margin="0,0,10,0"
                                Click="BtnRefreshFeePayments_Click" Style="{StaticResource SecondaryButtonStyle}"/>
                        <Separator Width="20"/>
                        <TextBlock Text="Search:" VerticalAlignment="Center" Margin="10,0,5,0" Foreground="{StaticResource TextPrimaryBrush}"/>
                        <TextBox x:Name="txtSearchFeePayments" Width="200" Height="25" VerticalAlignment="Center"
                                 TextChanged="TxtSearchFeePayments_TextChanged"
                                 ToolTip="Search by receipt number, student name, or fee type"/>
                    </StackPanel>

                    <DataGrid x:Name="dgFeePayments" Grid.Row="1" AutoGenerateColumns="False"
                              CanUserAddRows="False" CanUserDeleteRows="False" IsReadOnly="True"
                              GridLinesVisibility="All" HeadersVisibility="Column" AlternatingRowBackground="{StaticResource SurfaceBrush}">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Receipt No" Binding="{Binding ReceiptNumber}" Width="100"/>
                            <DataGridTextColumn Header="Student Name" Binding="{Binding StudentName}" Width="150"/>
                            <DataGridTextColumn Header="Class" Binding="{Binding ClassName}" Width="100"/>
                            <DataGridTextColumn Header="Fee Type" Binding="{Binding FeeTypeDisplay}" Width="100"/>
                            <DataGridTextColumn Header="Amount Paid" Binding="{Binding AmountPaidFormatted}" Width="100"/>
                            <DataGridTextColumn Header="Payment Method" Binding="{Binding PaymentMethodDisplay}" Width="120"/>
                            <DataGridTextColumn Header="Payment Date" Binding="{Binding PaymentDateFormatted}" Width="100"/>
                            <DataGridTextColumn Header="Remaining Balance" Binding="{Binding RemainingBalanceFormatted}" Width="120"/>
                            <DataGridTextColumn Header="Academic Year" Binding="{Binding AcademicYear}" Width="100"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>
        </TabControl>

        <!-- Status Bar -->
        <StatusBar Grid.Row="2" Height="25" Background="#34495E">
            <StatusBarItem>
                <TextBlock x:Name="lblStatus" Text="Ready" Foreground="White"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>