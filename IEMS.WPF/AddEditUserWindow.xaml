<Window x:Class="IEMS.WPF.AddEditUserWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Add/Edit User" Height="550" Width="600"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource SurfaceBrush}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="{StaticResource PrimaryBrush}" Padding="20">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="ðŸ‘¤" FontSize="32" VerticalAlignment="Center" Margin="0,0,15,0"/>
                <StackPanel VerticalAlignment="Center">
                    <TextBlock x:Name="txtTitle" Text="Add New User" FontSize="24" FontWeight="Bold"
                               Foreground="{StaticResource TextOnPrimaryBrush}"/>
                    <TextBlock Text="Enter user details below" FontSize="12"
                               Foreground="{StaticResource PrimaryLightBrush}" Margin="0,2,0,0"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Form Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="30">
            <StackPanel>
                <!-- Username -->
                <TextBlock Text="Username *" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <TextBox x:Name="txtUsername" Height="35" Margin="0,0,0,15"
                         VerticalContentAlignment="Center"/>

                <!-- Full Name -->
                <TextBlock Text="Full Name *" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <TextBox x:Name="txtFullName" Height="35" Margin="0,0,0,15"
                         VerticalContentAlignment="Center"/>

                <!-- Email -->
                <TextBlock Text="Email" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <TextBox x:Name="txtEmail" Height="35" Margin="0,0,0,15"
                         VerticalContentAlignment="Center"/>

                <!-- Role -->
                <TextBlock Text="Role *" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <ComboBox x:Name="cmbRole" Height="35" Margin="0,0,0,15">
                    <ComboBoxItem Content="Admin"/>
                    <ComboBoxItem Content="Principal"/>
                    <ComboBoxItem Content="Teacher"/>
                    <ComboBoxItem Content="Clerk"/>
                    <ComboBoxItem Content="Accountant"/>
                </ComboBox>

                <!-- Password Section (only for new users) -->
                <StackPanel x:Name="pnlPassword" Visibility="Visible">
                    <TextBlock Text="Password *" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <PasswordBox x:Name="txtPassword" Height="35" Margin="0,0,0,5"/>
                    <TextBlock Text="Must be 8+ characters with uppercase, lowercase, number, and special character"
                               FontSize="11" TextWrapping="Wrap"
                               Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,0,15"/>

                    <TextBlock Text="Confirm Password *" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <PasswordBox x:Name="txtConfirmPassword" Height="35" Margin="0,0,0,5"/>
                    <TextBlock Text="Must match the password above" FontSize="11"
                               Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,0,15"/>
                </StackPanel>

                <!-- Status (only for edit mode) -->
                <StackPanel x:Name="pnlStatus" Visibility="Collapsed">
                    <CheckBox x:Name="chkIsActive" Content="Account is Active" Margin="0,0,0,15"
                              FontWeight="SemiBold"/>
                </StackPanel>

                <!-- Error Message -->
                <TextBlock x:Name="txtError" Text="" Foreground="Red" TextWrapping="Wrap"
                           Margin="0,10,0,0" Visibility="Collapsed"/>
            </StackPanel>
        </ScrollViewer>

        <!-- Action Buttons -->
        <Border Grid.Row="2" Background="White" BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="0,1,0,0" Padding="20">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="btnSave" Content="ðŸ’¾ Save" Click="BtnSave_Click"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Width="120" Height="40" Margin="0,0,10,0"/>
                <Button x:Name="btnCancel" Content="âœ• Cancel" Click="BtnCancel_Click"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Width="120" Height="40"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>